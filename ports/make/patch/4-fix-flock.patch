diff --git a/src/posixos.c b/src/posixos.c
index 0cc0a58..9a3b006 100644
--- a/src/posixos.c
+++ b/src/posixos.c
@@ -43,6 +43,23 @@ this program.  If not, see <https://www.gnu.org/licenses/>.  */
 
 #define STREAM_OK(_s) ((fcntl (fileno (_s), F_GETFD) != -1) || (errno != EBADF))
 
+//stanix flock fix
+#ifdef __stanix__
+struct flock {
+	short l_type;    /* Type of lock: F_RDLCK,
+			    F_WRLCK, F_UNLCK */
+	short l_whence;  /* How to interpret l_start:
+			    SEEK_SET, SEEK_CUR, SEEK_END */
+	off_t l_start;   /* Starting offset for lock */
+	off_t l_len;     /* Number of bytes to lock */
+	pid_t l_pid;     /* PID of process blocking our lock
+			    (set by F_GETLK and F_OFD_GETLK) */
+};
+#define F_SETLKW 0
+#define F_WRLCK  0
+#define F_UNLCK  0
+#endif
+
 unsigned int
 check_io_state ()
 {
